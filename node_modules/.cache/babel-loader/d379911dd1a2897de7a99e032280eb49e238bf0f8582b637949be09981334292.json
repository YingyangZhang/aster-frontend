{"ast":null,"code":"import _slicedToArray from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{useEffect,useState,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function UpdateInformationForm(_ref){var currentUser=_ref.currentUser,setCurrentUser=_ref.setCurrentUser;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isGenderSelections=_useState2[0],setIsGenderSelections=_useState2[1];var _useState3=useState(currentUser.gender?currentUser.gender:'select'),_useState4=_slicedToArray(_useState3,2),selectedGender=_useState4[0],setSelectedGender=_useState4[1];var _useState5=useState(currentUser.first_name?currentUser.first_name:''),_useState6=_slicedToArray(_useState5,2),firstName=_useState6[0],setFirstName=_useState6[1];var _useState7=useState(currentUser.last_name?currentUser.last_name:''),_useState8=_slicedToArray(_useState7,2),lastName=_useState8[0],setLastName=_useState8[1];var _useState9=useState(currentUser.email?currentUser.email:''),_useState10=_slicedToArray(_useState9,2),email=_useState10[0],setEmail=_useState10[1];var _useState11=useState(currentUser.age?currentUser.age:''),_useState12=_slicedToArray(_useState11,2),age=_useState12[0],setAge=_useState12[1];var genderRef=useRef();var token=localStorage.getItem(\"jwt\");useEffect(function(){var handler=function handler(e){if(!genderRef.current.contains(e.target)){setIsGenderSelections(false);}};document.addEventListener('mousedown',handler);return function(){document.removeEventListener('mousedown',handler);};});function handleGenderSelections(){setIsGenderSelections(function(genderSelections){return!genderSelections;});}function handleSelection(e){setIsGenderSelections(false);setSelectedGender(e.target.textContent);}function handleSave(e){e.preventDefault();fetch(\"https://aster-app.onrender.com/users/\".concat(currentUser.id),{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify({first_name:firstName,last_name:lastName,email:email,age:age,gender:selectedGender})}).then(function(r){if(r.ok){r.json().then(function(data){setCurrentUser(data.user);});}else{r.json().then(function(errors){console.log(errors);});}});}return/*#__PURE__*/_jsxs(\"form\",{className:\"form\",style:{padding:\"0\"},onSubmit:handleSave,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"input-flex-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter First Name\",name:\"first_name\",value:firstName,onChange:function onChange(e){return setFirstName(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Last Name\",value:lastName,onChange:function onChange(e){return setLastName(e.target.value);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-flex-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Email\",value:email,onChange:function onChange(e){return setEmail(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"age-and-gender-container flex-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:age,onChange:function onChange(e){return setAge(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gender-dropdown\",ref:genderRef,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Gender\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"gender-btn flex-box\",onClick:handleGenderSelections,children:[/*#__PURE__*/_jsx(\"p\",{children:selectedGender}),/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-chevron-down\"})]}),isGenderSelections?/*#__PURE__*/_jsxs(\"div\",{className:\"gender-selections flex-box\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Male\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Female\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Intersex\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Trans\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Others\"})]}):null]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"buttons-container button-grey\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"p\",{children:\"SAVE\"})})})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","UpdateInformationForm","currentUser","setCurrentUser","isGenderSelections","setIsGenderSelections","gender","selectedGender","setSelectedGender","first_name","firstName","setFirstName","last_name","lastName","setLastName","email","setEmail","age","setAge","genderRef","token","localStorage","getItem","handler","e","current","contains","target","document","addEventListener","removeEventListener","handleGenderSelections","genderSelections","handleSelection","textContent","handleSave","preventDefault","fetch","id","method","headers","Authorization","body","JSON","stringify","then","r","ok","json","data","user","errors","console","log","padding","value","textAlign"],"sources":["/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/src/Components/UpdateInformationForm.js"],"sourcesContent":["import React from \"react\";\nimport { useEffect, useState, useRef} from \"react\";\n\nexport default function UpdateInformationForm({currentUser, setCurrentUser}) {\n    const [isGenderSelections, setIsGenderSelections] = useState(false);\n    const [selectedGender, setSelectedGender] = useState(currentUser.gender ? currentUser.gender : 'select');\n    const [firstName, setFirstName] = useState(currentUser.first_name ? currentUser.first_name : '');\n    const [lastName, setLastName] = useState(currentUser.last_name ? currentUser.last_name : '');\n    const [email, setEmail] = useState(currentUser.email ? currentUser.email : '');\n    const [age, setAge] = useState(currentUser.age ? currentUser.age : '');\n    let genderRef = useRef();\n    const token = localStorage.getItem(\"jwt\");\n\n    useEffect(() => {\n        let handler = e => {\n            if(!genderRef.current.contains(e.target)) {\n                setIsGenderSelections(false);\n            }\n        }\n\n        document.addEventListener('mousedown', handler);\n\n        return () => {\n            document.removeEventListener('mousedown', handler);\n        }\n    })\n\n    function handleGenderSelections() {\n        setIsGenderSelections(genderSelections => !genderSelections);\n    }\n\n    function handleSelection(e) {\n        setIsGenderSelections(false);\n        setSelectedGender(e.target.textContent);\n    }\n\n    function handleSave(e) {\n        e.preventDefault();\n\n        fetch(`https://aster-app.onrender.com/users/${currentUser.id}`, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${token}`,\n            },\n            body: JSON.stringify({\n                first_name: firstName,\n                last_name: lastName,\n                email: email,\n                age: age,\n                gender: selectedGender,\n            })\n        })\n        .then((r) => {\n            if (r.ok) {\n                r.json().then((data) => {\n                    setCurrentUser(data.user);\n                })\n            } else {\n                r.json().then((errors) => {\n                    console.log(errors)\n                })\n            }\n        })\n    }\n\n    return (\n        <form className=\"form\" style={{padding: \"0\"}} onSubmit={handleSave}>\n            <div className=\"input-flex-container\">\n                <div className=\"user-input\">\n                    <p>First Name</p>\n                    <input type=\"text\" placeholder=\"Enter First Name\" name=\"first_name\" value={firstName} onChange={(e) => setFirstName(e.target.value)}/>\n                </div>\n\n                <div className=\"user-input\">\n                    <p>Last Name</p>\n                    <input type=\"text\" placeholder=\"Enter Last Name\" value={lastName} onChange={(e) => setLastName(e.target.value)}/>\n                </div>\n            </div>\n\n            <div className=\"input-flex-container\">\n                <div className=\"user-input\">\n                    <p>Email</p>\n                    <input type=\"text\" placeholder=\"Enter Email\" value={email} onChange={(e) => setEmail(e.target.value)}/>\n                </div>\n\n                <div className=\"age-and-gender-container flex-box\">\n                    <div className=\"user-input\">\n                        <p>Age</p>\n                        <input type=\"text\" value={age} onChange={(e) => setAge(e.target.value)}/>\n                    </div>\n\n                    <div className=\"gender-dropdown\" ref={genderRef}>\n                        <p>Gender</p>\n                        <div className=\"gender-btn flex-box\" onClick={handleGenderSelections}>\n                            <p>{selectedGender}</p>\n                            <i className='bx bx-chevron-down'></i>\n                        </div>\n                        {isGenderSelections ? \n                        <div className=\"gender-selections flex-box\">\n                            <p onClick={handleSelection}>Male</p>\n                            <p onClick={handleSelection}>Female</p>\n                            <p onClick={handleSelection}>Intersex</p>\n                            <p onClick={handleSelection}>Trans</p>\n                            <p onClick={handleSelection}>Others</p>\n                        </div> \n                        : null}\n                    </div>\n                </div>\n            </div>\n    \n            <div className=\"buttons-container button-grey\">\n                <button className=\"button\" type=\"submit\" style={{textAlign: \"center\"}}>\n                    <p>SAVE</p>\n                </button>\n            </div>\n        </form> \n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}