{"ast":null,"code":"import _slicedToArray from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import'../index.css';import{Route,Routes}from\"react-router-dom\";import Header from'./Header';import Home from'./Home';import{useState,useEffect}from'react';import PopUpForms from'./PopUpForms';import Profile from'./Profile';import Reservation from'./Reservation';import Gallery from'./Gallery';import UserRequest from'./UserRequest';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState(null),_useState2=_slicedToArray(_useState,2),currentUser=_useState2[0],setCurrentUser=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isPopUpForms=_useState4[0],setIsPopUpForms=_useState4[1];var token=localStorage.getItem(\"jwt\");useEffect(function(){if(token!==null){fetch(\"https://aster-app.onrender.com/me\",{method:\"GET\",headers:{Authorization:\"Bearer \".concat(token)}}).then(function(r){return r.json();}).then(function(data){setCurrentUser(data.user);console.log(data.user);});}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"App\",children:[isPopUpForms?/*#__PURE__*/_jsx(PopUpForms,{setIsPopUpForms:setIsPopUpForms,currentUser:currentUser,setCurrentUser:setCurrentUser}):null,/*#__PURE__*/_jsx(Header,{setIsPopUpForm:setIsPopUpForms,currentUser:currentUser,setCurrentUser:setCurrentUser}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{exact:true,path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),currentUser?/*#__PURE__*/_jsx(Route,{exact:true,path:\"/profile\",element:/*#__PURE__*/_jsx(Profile,{currentUser:currentUser,setCurrentUser:setCurrentUser})}):null,currentUser?/*#__PURE__*/_jsx(Route,{exact:true,path:\"/reservation\",element:/*#__PURE__*/_jsx(Reservation,{currentUser:currentUser,setCurrentUser:setCurrentUser})}):null,/*#__PURE__*/_jsx(Route,{exact:true,path:\"/gallery\",element:/*#__PURE__*/_jsx(Gallery,{})}),currentUser?/*#__PURE__*/_jsx(Route,{exact:true,path:\"/user_request\",element:/*#__PURE__*/_jsx(UserRequest,{currentUser:currentUser,setCurrentUser:setCurrentUser})}):null]})]});}export default App;","map":{"version":3,"names":["Route","Routes","Header","Home","useState","useEffect","PopUpForms","Profile","Reservation","Gallery","UserRequest","App","currentUser","setCurrentUser","isPopUpForms","setIsPopUpForms","token","localStorage","getItem","fetch","method","headers","Authorization","then","r","json","data","user","console","log"],"sources":["/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/src/Components/App.js"],"sourcesContent":["import '../index.css';\nimport { Route, Routes } from \"react-router-dom\";\nimport Header from './Header';\nimport Home from './Home';\nimport { useState, useEffect } from 'react';\nimport PopUpForms from './PopUpForms';\nimport Profile from './Profile';\nimport Reservation from './Reservation';\nimport Gallery from './Gallery';\nimport UserRequest from './UserRequest';\n\nfunction App() {\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isPopUpForms, setIsPopUpForms] = useState(false);\n  const token = localStorage.getItem(\"jwt\");\n\n  useEffect(() => {\n    if (token !== null) {\n      fetch(\"https://aster-app.onrender.com/me\", {\n        method: \"GET\",\n        headers: {\n          Authorization: `Bearer ${token}`,\n        },\n      })\n      .then(r => r.json())\n      .then(data => {\n        setCurrentUser(data.user)\n        console.log(data.user)\n      })\n    }\n   },[])\n\n  return (\n    <div className=\"App\">\n      {isPopUpForms ? <PopUpForms setIsPopUpForms={setIsPopUpForms} currentUser={currentUser} setCurrentUser={setCurrentUser}/> : null}\n      <Header setIsPopUpForm={setIsPopUpForms} currentUser={currentUser} setCurrentUser={setCurrentUser}/>\n      <Routes>\n        <Route exact path=\"/\" element={<Home />} />\n        {currentUser ?  <Route exact path=\"/profile\" element={<Profile currentUser={currentUser} setCurrentUser={setCurrentUser}/>} /> : null}\n        {currentUser ? <Route exact path=\"/reservation\" element={<Reservation currentUser={currentUser} setCurrentUser={setCurrentUser}/>} /> : null}\n        <Route exact path=\"/gallery\" element={<Gallery />} />\n        {currentUser ? <Route exact path=\"/user_request\" element={<UserRequest currentUser={currentUser} setCurrentUser={setCurrentUser}/>} /> : null}\n      </Routes>\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"gJAAA,MAAO,cAAc,CACrB,OAASA,KAAK,CAAEC,MAAM,KAAQ,kBAAkB,CAChD,MAAOC,OAAM,KAAM,UAAU,CAC7B,MAAOC,KAAI,KAAM,QAAQ,CACzB,OAASC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CAC3C,MAAOC,WAAU,KAAM,cAAc,CACrC,MAAOC,QAAO,KAAM,WAAW,CAC/B,MAAOC,YAAW,KAAM,eAAe,CACvC,MAAOC,QAAO,KAAM,WAAW,CAC/B,MAAOC,YAAW,KAAM,eAAe,CAAC,wFAExC,QAASC,IAAG,EAAG,CACb,cAAsCP,QAAQ,CAAC,IAAI,CAAC,wCAA7CQ,WAAW,eAAEC,cAAc,eAClC,eAAwCT,QAAQ,CAAC,KAAK,CAAC,yCAAhDU,YAAY,eAAEC,eAAe,eACpC,GAAMC,MAAK,CAAGC,YAAY,CAACC,OAAO,CAAC,KAAK,CAAC,CAEzCb,SAAS,CAAC,UAAM,CACd,GAAIW,KAAK,GAAK,IAAI,CAAE,CAClBG,KAAK,CAAC,mCAAmC,CAAE,CACzCC,MAAM,CAAE,KAAK,CACbC,OAAO,CAAE,CACPC,aAAa,kBAAYN,KAAK,CAChC,CACF,CAAC,CAAC,CACDO,IAAI,CAAC,SAAAC,CAAC,QAAIA,EAAC,CAACC,IAAI,EAAE,GAAC,CACnBF,IAAI,CAAC,SAAAG,IAAI,CAAI,CACZb,cAAc,CAACa,IAAI,CAACC,IAAI,CAAC,CACzBC,OAAO,CAACC,GAAG,CAACH,IAAI,CAACC,IAAI,CAAC,CACxB,CAAC,CAAC,CACJ,CACD,CAAC,CAAC,EAAE,CAAC,CAEN,mBACE,aAAK,SAAS,CAAC,KAAK,WACjBb,YAAY,cAAG,KAAC,UAAU,EAAC,eAAe,CAAEC,eAAgB,CAAC,WAAW,CAAEH,WAAY,CAAC,cAAc,CAAEC,cAAe,EAAE,CAAG,IAAI,cAChI,KAAC,MAAM,EAAC,cAAc,CAAEE,eAAgB,CAAC,WAAW,CAAEH,WAAY,CAAC,cAAc,CAAEC,cAAe,EAAE,cACpG,MAAC,MAAM,yBACL,KAAC,KAAK,EAAC,KAAK,MAAC,IAAI,CAAC,GAAG,CAAC,OAAO,cAAE,KAAC,IAAI,IAAI,EAAG,CAC1CD,WAAW,cAAI,KAAC,KAAK,EAAC,KAAK,MAAC,IAAI,CAAC,UAAU,CAAC,OAAO,cAAE,KAAC,OAAO,EAAC,WAAW,CAAEA,WAAY,CAAC,cAAc,CAAEC,cAAe,EAAG,EAAG,CAAG,IAAI,CACpID,WAAW,cAAG,KAAC,KAAK,EAAC,KAAK,MAAC,IAAI,CAAC,cAAc,CAAC,OAAO,cAAE,KAAC,WAAW,EAAC,WAAW,CAAEA,WAAY,CAAC,cAAc,CAAEC,cAAe,EAAG,EAAG,CAAG,IAAI,cAC5I,KAAC,KAAK,EAAC,KAAK,MAAC,IAAI,CAAC,UAAU,CAAC,OAAO,cAAE,KAAC,OAAO,IAAI,EAAG,CACpDD,WAAW,cAAG,KAAC,KAAK,EAAC,KAAK,MAAC,IAAI,CAAC,eAAe,CAAC,OAAO,cAAE,KAAC,WAAW,EAAC,WAAW,CAAEA,WAAY,CAAC,cAAc,CAAEC,cAAe,EAAG,EAAG,CAAG,IAAI,GACtI,GACL,CAEV,CAEA,cAAeF,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}