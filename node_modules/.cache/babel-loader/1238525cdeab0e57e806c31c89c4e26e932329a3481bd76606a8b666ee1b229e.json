{"ast":null,"code":"import _defineProperty from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState}from\"react\";import{motion}from\"framer-motion\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SignUpForm(_ref){var setIsSignUpForm=_ref.setIsSignUpForm,setIsInformationForm=_ref.setIsInformationForm,popUpRef=_ref.popUpRef,setCurrentUser=_ref.setCurrentUser;var _useState=useState({username:\"\",password:\"\",password_digest:\"\"}),_useState2=_slicedToArray(_useState,2),newUser=_useState2[0],setNewUser=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];function handleInput(e){var name=e.target.name;var value=e.target.value;setNewUser(_objectSpread(_objectSpread({},newUser),{},_defineProperty({},name,value)));}function handleSignUp(e){e.preventDefault();fetch('https://aster-app.onrender.com/users',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({user:newUser})}).then(function(r){if(r.ok){r.json().then(function(data){localStorage.setItem(\"jwt\",data.jwt);setCurrentUser(data.user);setIsInformationForm(true);});}else{r.json().then(function(errors){console.log(errors);setErrors(errors.errors);});}});}return/*#__PURE__*/_jsxs(motion.form,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},transition:{duration:.5},onSubmit:handleSignUp,className:\"form\",ref:popUpRef,children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"add-line-break\",children:\"CREATE\"}),\" YOUR ACCOUNT.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"User Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter User Name\",name:\"username\",onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter Password\",name:\"password\",onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Password Confirmation\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Confirm Password\",name:\"password_confirmation\",onChange:handleInput})]}),/*#__PURE__*/_jsx(\"div\",{className:\"errors-container\",children:errors?errors.map(function(error){return/*#__PURE__*/_jsxs(\"p\",{className:\"errors\",children:[\"* \",error]});}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container flex-box\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",children:/*#__PURE__*/_jsx(\"p\",{children:\"SIGN UP\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sign-up-link flex-box\",onClick:function onClick(){return setIsSignUpForm(false);},children:[/*#__PURE__*/_jsx(\"p\",{children:\"GO BACK\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sign-up-arrow-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://aster-imgs.s3.amazonaws.com/arrow-white.png\",alt:\"arrow\"})})]})]})]});}","map":{"version":3,"names":["React","useState","motion","SignUpForm","setIsSignUpForm","setIsInformationForm","popUpRef","setCurrentUser","username","password","password_digest","newUser","setNewUser","errors","setErrors","handleInput","e","name","target","value","handleSignUp","preventDefault","fetch","method","headers","body","JSON","stringify","user","then","r","ok","json","data","localStorage","setItem","jwt","console","log","opacity","y","duration","map","error"],"sources":["/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/src/Components/SignUpForm.js"],"sourcesContent":["import { React, useState } from \"react\";\nimport { motion } from \"framer-motion\";\n\nexport default function SignUpForm({setIsSignUpForm, setIsInformationForm, popUpRef, setCurrentUser}) {\n    const [newUser, setNewUser] = useState({\n        username: \"\",\n        password: \"\",\n        password_digest: \"\"\n    });\n    const [errors, setErrors] = useState(null);\n\n    function handleInput(e) {\n        const name = e.target.name;\n        let value = e.target.value;\n\n        setNewUser({\n            ...newUser,\n            [name]: value,\n        })\n    }\n\n    function handleSignUp(e) {\n        e.preventDefault();\n\n        fetch('https://aster-app.onrender.com/users', {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n            },\n            body: JSON.stringify({\n                user: newUser,\n            })\n        })\n        .then((r) => {\n            if (r.ok) {\n                r.json().then((data) => {\n                    localStorage.setItem(\"jwt\", data.jwt);\n                    setCurrentUser(data.user);\n                    setIsInformationForm(true);\n                })\n            } else {\n                r.json().then((errors) => {\n                    console.log(errors);\n                    setErrors(errors.errors)\n                })\n            }\n        })\n    }\n\n    return (\n        <motion.form\n        initial={{ opacity: 0, y: 10 }} \n        whileInView={{ opacity: 1, y: 0 }} \n        transition={{ duration: .5 }} \n        onSubmit={handleSignUp} \n        className=\"form\"\n        ref={popUpRef}>\n            <h1><span className=\"add-line-break\">CREATE</span> YOUR ACCOUNT.</h1>\n            <div className=\"user-input\">\n                <p>User Name</p>\n                <input type=\"text\" placeholder=\"Enter User Name\" name=\"username\" onChange={handleInput}/>\n            </div>\n\n            <div className=\"user-input\">\n                <p>Password</p>\n                <input type=\"password\" placeholder=\"Enter Password\" name=\"password\" onChange={handleInput}/>\n            </div>\n\n            <div className=\"user-input\">\n                <p>Password Confirmation</p>\n                <input type=\"password\" placeholder=\"Confirm Password\" name=\"password_confirmation\" onChange={handleInput}/>\n            </div>\n\n            \n            <div className=\"errors-container\">\n                {errors ? (errors.map((error) => {\n                    return <p className=\"errors\">* {error}</p>\n                })) : null}\n            </div>\n\n\n            <div className=\"buttons-container flex-box\">\n                <button className=\"button\" type=\"submit\">\n                    <p>SIGN UP</p>\n                </button>\n                <div className=\"sign-up-link flex-box\" onClick={() => setIsSignUpForm(false)}>\n                    <p>GO BACK</p>\n                    <div className=\"sign-up-arrow-container\">\n                        <img src=\"https://aster-imgs.s3.amazonaws.com/arrow-white.png\" alt=\"arrow\" />\n                    </div>\n                </div>\n            </div>\n        </motion.form>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}