{"ast":null,"code":"import _slicedToArray from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState,useRef}from\"react\";import{motion}from\"framer-motion\";import Pagination from\"./Pagination\";import Footer from\"./Footer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Gallery(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),gallery=_useState2[0],setGallery=_useState2[1];var _useState3=useState(1),_useState4=_slicedToArray(_useState3,2),currentPage=_useState4[0],setCurrentPage=_useState4[1];var _useState5=useState(12),_useState6=_slicedToArray(_useState5,2),imagesPerPage=_useState6[0],setImagesPerPage=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isImagePopUp=_useState8[0],setIsImagePopUp=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),selectedImage=_useState10[0],setSelectedImage=_useState10[1];var imagePopUpRef=useRef();var delayTime=0;var savedPage=parseInt(sessionStorage.getItem('myPage'));useEffect(function(){fetch('https://aster-app.onrender.com/galleries').then(function(r){return r.json();}).then(function(data){setGallery(data);setCurrentPage(savedPage?savedPage:1);});},[]);useEffect(function(){var handler=function handler(e){if(!imagePopUpRef.current.contains(e.target)){setIsImagePopUp(false);}};document.addEventListener('mousedown',handler);return function(){document.removeEventListener('mousedown',handler);};});var totalImages=gallery.length;var indexOfLastImage=currentPage*imagesPerPage;var indexOfFirstImage=indexOfLastImage-imagesPerPage;var currentImages=gallery.slice(indexOfFirstImage,indexOfLastImage);function handlePages(num){setCurrentPage(num);sessionStorage.setItem('myPage',num);}function handleImageClick(image){setSelectedImage(image);setIsImagePopUp(true);}console.log(currentPage);return/*#__PURE__*/_jsxs(\"div\",{className:\"background-color container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gallery\",id:\"gallery\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"gallery-headline-container flex-box\",id:\"gallery-headline-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"tag-charcoal\",children:/*#__PURE__*/_jsx(\"p\",{children:\"MOMENTS\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery-headline\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"GALLERY\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"gallery-container\",children:currentImages.map(function(image){delayTime=delayTime+.2;return/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.8,delay:delayTime},className:\"gallery-img-container flex-box\",onClick:function onClick(){return handleImageClick(image);},children:/*#__PURE__*/_jsx(\"div\",{className:\"gallery-img\",children:/*#__PURE__*/_jsx(\"img\",{src:image.img_url,alt:\"image\",className:\"center-img\"})})},image.id);})})]}),/*#__PURE__*/_jsx(Pagination,{totalImages:totalImages,imagesPerPage:imagesPerPage,currentPage:currentPage,setCurrentPage:setCurrentPage,handlePages:handlePages}),isImagePopUp?/*#__PURE__*/_jsx(\"div\",{className:\"image-pop-up\",children:/*#__PURE__*/_jsx(motion.div,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},transition:{duration:.5},className:\"image-pop-up-container\",ref:imagePopUpRef,children:/*#__PURE__*/_jsx(\"img\",{src:selectedImage.img_url,alt:\"image\"})})}):/*#__PURE__*/_jsx(\"div\",{ref:imagePopUpRef}),/*#__PURE__*/_jsx(Footer,{})]});}","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","Pagination","Footer","Gallery","gallery","setGallery","currentPage","setCurrentPage","imagesPerPage","setImagesPerPage","isImagePopUp","setIsImagePopUp","selectedImage","setSelectedImage","imagePopUpRef","delayTime","savedPage","parseInt","sessionStorage","getItem","fetch","then","r","json","data","handler","e","current","contains","target","document","addEventListener","removeEventListener","totalImages","length","indexOfLastImage","indexOfFirstImage","currentImages","slice","handlePages","num","setItem","handleImageClick","image","console","log","map","opacity","y","duration","delay","img_url","id"],"sources":["/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/src/Components/Gallery.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { motion } from \"framer-motion\";\nimport Pagination from \"./Pagination\";\nimport Footer from \"./Footer\";\n\nexport default function Gallery() {\n    const [gallery, setGallery] = useState([]);\n    const [currentPage, setCurrentPage] = useState(1);\n    const [imagesPerPage, setImagesPerPage] = useState(12);\n    const [isImagePopUp, setIsImagePopUp] = useState(false);\n    const [selectedImage, setSelectedImage] = useState('');\n    let imagePopUpRef = useRef();\n    let delayTime = 0;\n    let savedPage = parseInt(sessionStorage.getItem('myPage'))\n\n    useEffect(() => {\n        fetch('https://aster-app.onrender.com/galleries')\n        .then((r) => r.json())\n        .then((data) => {\n            setGallery(data);\n            setCurrentPage(savedPage ? savedPage : 1);\n        })\n    },[])\n\n    useEffect(() => {\n        let handler = e => {\n            if(!imagePopUpRef.current.contains(e.target)) {\n                setIsImagePopUp(false);\n            }\n        }\n\n        document.addEventListener('mousedown', handler);\n\n        return () => {\n            document.removeEventListener('mousedown', handler);\n        }\n    })\n    \n    const totalImages = gallery.length;\n    const indexOfLastImage = currentPage * imagesPerPage;\n    const indexOfFirstImage = indexOfLastImage - imagesPerPage;\n    const currentImages = gallery.slice(indexOfFirstImage, indexOfLastImage);\n\n    function handlePages(num) {\n        setCurrentPage(num);\n        sessionStorage.setItem('myPage', num)\n    }\n\n    function handleImageClick(image) {\n        setSelectedImage(image);\n        setIsImagePopUp(true);\n    }\n\n    console.log(currentPage);\n\n    return (\n        <div className=\"background-color container\">\n            <div className=\"gallery\" id=\"gallery\" >\n                <div className=\"gallery-headline-container flex-box\" id=\"gallery-headline-container\">\n                    {/* <div className=\"upload-link\">\n                        <p>SHARE YOURS +</p>\n                    </div> */}\n                    <div className=\"tag-charcoal\">\n                        <p>MOMENTS</p>\n                    </div>\n\n                    <div className=\"gallery-headline\">\n                        <h1>GALLERY</h1>\n                    </div>\n                </div>\n\n                <div className=\"gallery-container\">\n                    {currentImages.map((image) => {\n                        delayTime = delayTime + .2;\n                        return <motion.div initial={{ opacity: 0, y: 10 }} \n                        animate={{ opacity: 1, y: 0}} \n                        transition={{ duration: .8, delay: delayTime }} \n                        className=\"gallery-img-container flex-box\" \n                        onClick={() => handleImageClick(image)}\n                        key={image.id}>\n                        <div className=\"gallery-img\">\n                            <img src={image.img_url} alt=\"image\" className=\"center-img\"/>\n                        </div>\n                    </motion.div>\n                    })}\n                </div>\n            </div>\n            <Pagination totalImages={totalImages} imagesPerPage={imagesPerPage} currentPage={currentPage} setCurrentPage={setCurrentPage} handlePages={handlePages}/>\n\n            {isImagePopUp ?\n                <div className=\"image-pop-up\">\n                    <motion.div\n                    initial={{ opacity: 0, y: 10 }} \n                    whileInView={{ opacity: 1, y: 0 }} \n                    transition={{ duration: .5 }}\n                    className=\"image-pop-up-container\" \n                    ref={imagePopUpRef}>\n                        <img src={selectedImage.img_url} alt=\"image\" />\n                    </motion.div>\n                </div>\n                :\n                <div ref={imagePopUpRef}></div>\n            }\n\n            <Footer />\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}