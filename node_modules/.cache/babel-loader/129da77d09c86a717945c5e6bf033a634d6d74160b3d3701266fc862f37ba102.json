{"ast":null,"code":"import _defineProperty from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import{motion}from\"framer-motion\";import{useEffect,useState,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function InformationForm(_ref){var popUpRef=_ref.popUpRef,currentUser=_ref.currentUser,setCurrentUser=_ref.setCurrentUser,setIsPopUpForms=_ref.setIsPopUpForms;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isGenderSelections=_useState2[0],setIsGenderSelections=_useState2[1];var _useState3=useState('Select'),_useState4=_slicedToArray(_useState3,2),selectedGender=_useState4[0],setSelectedGender=_useState4[1];var _useState5=useState({first_name:\"\",last_name:\"\",email:\"\",age:\"\"}),_useState6=_slicedToArray(_useState5,2),userInfo=_useState6[0],setUserInfo=_useState6[1];var genderRef=useRef();var token=localStorage.getItem(\"jwt\");useEffect(function(){var handler=function handler(e){if(!genderRef.current.contains(e.target)){setIsGenderSelections(false);}};document.addEventListener('mousedown',handler);return function(){document.removeEventListener('mousedown',handler);};});function handleInput(e){var name=e.target.name;var value=e.target.value;setUserInfo(_objectSpread(_objectSpread({},userInfo),{},_defineProperty({},name,value)));}function handleGenderSelections(){setIsGenderSelections(function(genderSelections){return!genderSelections;});}function handleSelection(e){setIsGenderSelections(false);setSelectedGender(e.target.textContent);}function handleSubmit(e){e.preventDefault();fetch(\"https://aster-app.onrender.com/users/\".concat(currentUser.id),{method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)},body:JSON.stringify(_objectSpread(_objectSpread({},userInfo),{},{gender:selectedGender}))}).then(function(r){if(r.ok){r.json().then(function(data){setCurrentUser(data.user);setIsPopUpForms(false);});}else{r.json().then(function(errors){console.log(errors);});}});}return/*#__PURE__*/_jsxs(motion.form,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},transition:{duration:.5},style:{width:\"650px\"},className:\"form\",onSubmit:handleSubmit,ref:popUpRef,children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"add-line-break\",children:\"COMPLETE\"}),\" YOUR INFORMATION.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-flex-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"First Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter First Name\",name:\"first_name\",onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Last Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Last Name\",name:\"last_name\",onChange:handleInput})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-flex-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter Email\",name:\"email\",onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"age-and-gender-container flex-box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Age\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"age\",onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"gender-dropdown\",ref:genderRef,children:[/*#__PURE__*/_jsx(\"p\",{children:\"Gender\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"gender-btn flex-box\",onClick:handleGenderSelections,children:[/*#__PURE__*/_jsx(\"p\",{children:selectedGender}),/*#__PURE__*/_jsx(\"i\",{className:\"bx bx-chevron-down\"})]}),isGenderSelections?/*#__PURE__*/_jsxs(\"div\",{className:\"gender-selections flex-box\",children:[/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Male\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Female\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Intersex\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Trans\"}),/*#__PURE__*/_jsx(\"p\",{onClick:handleSelection,children:\"Others\"})]}):null]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"buttons-container\",children:/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"p\",{children:\"CONFIRM\"})})})]});}","map":{"version":3,"names":["React","motion","useEffect","useState","useRef","InformationForm","popUpRef","currentUser","setCurrentUser","setIsPopUpForms","isGenderSelections","setIsGenderSelections","selectedGender","setSelectedGender","first_name","last_name","email","age","userInfo","setUserInfo","genderRef","token","localStorage","getItem","handler","e","current","contains","target","document","addEventListener","removeEventListener","handleInput","name","value","handleGenderSelections","genderSelections","handleSelection","textContent","handleSubmit","preventDefault","fetch","id","method","headers","Authorization","body","JSON","stringify","gender","then","r","ok","json","data","user","errors","console","log","opacity","y","duration","width","textAlign"],"sources":["/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/src/Components/InformationForm.js"],"sourcesContent":["import React from \"react\";\nimport { motion } from \"framer-motion\";\nimport { useEffect, useState, useRef } from \"react\";\n\nexport default function InformationForm({popUpRef, currentUser, setCurrentUser, setIsPopUpForms}) {\n    const [isGenderSelections, setIsGenderSelections] = useState(false);\n    const [selectedGender, setSelectedGender] = useState('Select');\n    const [userInfo, setUserInfo] = useState({\n        first_name: \"\",\n        last_name: \"\",\n        email: \"\",\n        age: \"\"\n    })\n    let genderRef = useRef();\n    const token = localStorage.getItem(\"jwt\");\n\n    useEffect(() => {\n        let handler = e => {\n            if(!genderRef.current.contains(e.target)) {\n                setIsGenderSelections(false);\n            }\n        }\n\n        document.addEventListener('mousedown', handler);\n\n        return () => {\n            document.removeEventListener('mousedown', handler);\n        }\n    })\n\n    function handleInput(e) {\n        const name = e.target.name;\n        let value = e.target.value;\n\n        setUserInfo({\n            ...userInfo,\n            [name]: value,\n        })\n    }\n\n    function handleGenderSelections() {\n        setIsGenderSelections(genderSelections => !genderSelections);\n    }\n\n    function handleSelection(e) {\n        setIsGenderSelections(false);\n        setSelectedGender(e.target.textContent);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        fetch(`https://aster-app.onrender.com/users/${currentUser.id}`, {\n            method: 'PATCH',\n            headers: {\n                'Content-Type': 'application/json',\n                Authorization: `Bearer ${token}`,\n            },\n            body: JSON.stringify({\n                ...userInfo,\n                gender: selectedGender,\n            })\n        })\n        .then((r) => {\n            if (r.ok) {\n                r.json().then((data) => {\n                    setCurrentUser(data.user);\n                    setIsPopUpForms(false);\n                })\n            } else {\n                r.json().then((errors) => {\n                    console.log(errors)\n                })\n            }\n        })\n    }\n\n    return (\n        <motion.form\n        initial={{ opacity: 0, y: 10 }} \n        whileInView={{ opacity: 1, y: 0 }} \n        transition={{ duration: .5 }} \n        style={{width: \"650px\"}} \n        className=\"form\"\n        onSubmit={handleSubmit} \n        ref={popUpRef}>\n            <h1><span className=\"add-line-break\">COMPLETE</span> YOUR INFORMATION.</h1>\n            <div className=\"input-flex-container\">\n                <div className=\"user-input\">\n                    <p>First Name</p>\n                    <input type=\"text\" placeholder=\"Enter First Name\" name=\"first_name\" onChange={handleInput}/>\n                </div>\n\n                <div className=\"user-input\">\n                    <p>Last Name</p>\n                    <input type=\"text\" placeholder=\"Enter Last Name\" name=\"last_name\" onChange={handleInput}/>\n                </div>\n            </div>\n\n            <div className=\"input-flex-container\">\n                <div className=\"user-input\">\n                    <p>Email</p>\n                    <input type=\"text\" placeholder=\"Enter Email\" name=\"email\" onChange={handleInput}/>\n                </div>\n\n                <div className=\"age-and-gender-container flex-box\">\n                    <div className=\"user-input\">\n                        <p>Age</p>\n                        <input type=\"text\" name=\"age\" onChange={handleInput}/>\n                    </div>\n\n                    <div className=\"gender-dropdown\" ref={genderRef}>\n                        <p>Gender</p>\n                        <div className=\"gender-btn flex-box\" onClick={handleGenderSelections}>\n                            <p>{selectedGender}</p>\n                            <i className='bx bx-chevron-down'></i>\n                        </div>\n                        {isGenderSelections ? \n                        <div className=\"gender-selections flex-box\">\n                            <p onClick={handleSelection}>Male</p>\n                            <p onClick={handleSelection}>Female</p>\n                            <p onClick={handleSelection}>Intersex</p>\n                            <p onClick={handleSelection}>Trans</p>\n                            <p onClick={handleSelection}>Others</p>\n                        </div> \n                        : null}\n                    </div>\n                </div>\n            </div>\n    \n            <div className=\"buttons-container\">\n                <button className=\"button\" type=\"submit\" style={{textAlign: \"center\"}}>\n                    <p>CONFIRM</p>\n                </button>\n            </div>\n        </motion.form> \n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}