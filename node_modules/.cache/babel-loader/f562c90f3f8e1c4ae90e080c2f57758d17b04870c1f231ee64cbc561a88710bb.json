{"ast":null,"code":"import _defineProperty from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{motion}from\"framer-motion\";import React,{useState}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function LoginForm(_ref){var setIsSignUpForm=_ref.setIsSignUpForm,popUpRef=_ref.popUpRef,setCurrentUser=_ref.setCurrentUser,setIsPopUpForms=_ref.setIsPopUpForms;var _useState=useState({username:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),loginInput=_useState2[0],setLoginInput=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];function handleLogin(e){e.preventDefault();fetch('https://aster-app.onrender.com/login',{method:'POST',headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({user:loginInput})}).then(function(r){if(r.ok){r.json().then(function(data){localStorage.setItem(\"jwt\",data.jwt);setCurrentUser(data.user);setIsPopUpForms(false);});}else{r.json().then(function(errors){setErrors(errors.message);});}});}function handleInput(e){var name=e.target.name;var value=e.target.value;setLoginInput(_objectSpread(_objectSpread({},loginInput),{},_defineProperty({},name,value)));}return/*#__PURE__*/_jsxs(motion.form,{initial:{opacity:0,y:10},whileInView:{opacity:1,y:0},transition:{duration:.5},onSubmit:handleLogin,className:\"form\",ref:popUpRef,children:[/*#__PURE__*/_jsxs(\"h1\",{children:[/*#__PURE__*/_jsx(\"span\",{className:\"add-line-break\",children:\"LOGIN TO\"}),\" YOUR ACCOUNT.\"]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"User Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter User Name\",name:\"username\",onChange:handleInput})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"user-input\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Enter Password\",name:\"password\",onChange:handleInput})]}),/*#__PURE__*/_jsx(\"div\",{className:\"errors-container\",children:errors?/*#__PURE__*/_jsxs(\"p\",{className:\"errors\",children:[\"* \",errors]}):null}),/*#__PURE__*/_jsxs(\"div\",{className:\"buttons-container flex-box\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"button\",type:\"submit\",children:/*#__PURE__*/_jsx(\"p\",{children:\"SIGN IN\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sign-up-link flex-box\",onClick:function onClick(){return setIsSignUpForm(true);},children:[/*#__PURE__*/_jsx(\"p\",{children:\"SIGN UP\"}),/*#__PURE__*/_jsx(\"div\",{className:\"sign-up-arrow-container\",children:/*#__PURE__*/_jsx(\"img\",{src:\"https://aster-imgs.s3.amazonaws.com/arrow-white.png\",alt:\"arrow\"})})]})]})]});}","map":{"version":3,"names":["motion","React","useState","LoginForm","setIsSignUpForm","popUpRef","setCurrentUser","setIsPopUpForms","username","password","loginInput","setLoginInput","errors","setErrors","handleLogin","e","preventDefault","fetch","method","headers","body","JSON","stringify","user","then","r","ok","json","data","localStorage","setItem","jwt","message","handleInput","name","target","value","opacity","y","duration"],"sources":["/Users/yingyangzhang/Desktop/Porjects/Aster/aster-frontend/src/Components/LoginForm.js"],"sourcesContent":["import { motion } from \"framer-motion\";\nimport React, { useState } from \"react\";\n\nexport default function LoginForm({setIsSignUpForm, popUpRef, setCurrentUser, setIsPopUpForms}) {\n    const [loginInput, setLoginInput] = useState({\n        username: \"\",\n        password: \"\"\n    });\n    const [errors, setErrors] = useState(null);\n\n    function handleLogin(e) {\n        e.preventDefault();\n\n        fetch('https://aster-app.onrender.com/login', {\n            method: 'POST',\n            headers: {\n                \"Content-Type\": \"application/json\"\n            },\n            body: JSON.stringify({\n                user: loginInput,\n            })\n        })\n        .then((r) => {\n            if (r.ok) {\n                r.json().then((data) => {\n                    localStorage.setItem(\"jwt\", data.jwt);\n                    setCurrentUser(data.user);\n                    setIsPopUpForms(false);\n                })\n            } else {\n                r.json().then((errors) => {\n                    setErrors(errors.message)\n                })\n            }\n        })\n    }\n\n    function handleInput(e) {\n        const name = e.target.name;\n        let value = e.target.value;\n\n        setLoginInput({\n            ...loginInput,\n            [name]: value,\n        })\n    }\n\n    return (\n        <motion.form\n        initial={{ opacity: 0, y: 10 }} \n        whileInView={{ opacity: 1, y: 0 }} \n        transition={{ duration: .5 }}\n        onSubmit={handleLogin} \n        className=\"form\"\n        ref={popUpRef}>\n            <h1><span className=\"add-line-break\">LOGIN TO</span> YOUR ACCOUNT.</h1>\n            <div className=\"user-input\">\n                <p>User Name</p>\n                <input type=\"text\" placeholder=\"Enter User Name\" name=\"username\" onChange={handleInput}/>\n            </div>\n\n            <div className=\"user-input\">\n                <p>Password</p>\n                <input type=\"password\" placeholder=\"Enter Password\" name=\"password\" onChange={handleInput}/>\n            </div>\n\n            <div className=\"errors-container\">\n                {errors ? <p className=\"errors\">* {errors}</p> : null}\n            </div>\n\n            <div className=\"buttons-container flex-box\">\n                <button className=\"button\" type=\"submit\">\n                    <p>SIGN IN</p>\n                </button>\n                <div className=\"sign-up-link flex-box\" onClick={() => setIsSignUpForm(true)}>\n                    <p>SIGN UP</p>\n                    <div className=\"sign-up-arrow-container\">\n                        <img src=\"https://aster-imgs.s3.amazonaws.com/arrow-white.png\" alt=\"arrow\" />\n                    </div>\n                </div>\n            </div>\n        </motion.form>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}